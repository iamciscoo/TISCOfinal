@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --radius: 0.75rem;
  --background: 255 255 255;
  --foreground: 15 23 42;
  --card: 255 255 255;
  --card-foreground: 15 23 42;
  --popover: 255 255 255;
  --popover-foreground: 15 23 42;
  --primary: 59 130 246;
  --primary-foreground: 255 255 255;
  --secondary: 241 245 249;
  --secondary-foreground: 15 23 42;
  --muted: 248 250 252;
  --muted-foreground: 100 116 139;
  --accent: 241 245 249;
  --accent-foreground: 15 23 42;
  --destructive: 239 68 68;
  --destructive-foreground: 255 255 255;
  --border: 226 232 240;
  --input: 226 232 240;
  --ring: 59 130 246;
  --chart-1: 34 197 94;
  --chart-2: 59 130 246;
  --chart-3: 168 85 247;
  --chart-4: 251 146 60;
  --chart-5: 239 68 68;
  --sidebar: 248 250 252;
  --sidebar-foreground: 51 65 85;
  --sidebar-primary: 59 130 246;
  --sidebar-primary-foreground: 255 255 255;
  --sidebar-accent: 241 245 249;
  --sidebar-accent-foreground: 51 65 85;
  --sidebar-border: 226 232 240;
  --sidebar-ring: 59 130 246;
}

.dark {
  /* Black-based dark UI */
  --background: 13 13 13;            /* #0d0d0d */
  --foreground: 243 244 246;         /* #f3f4f6 */
  --card: 17 17 17;                  /* #111111 */
  --card-foreground: 243 244 246;    /* #f3f4f6 */
  --popover: 17 17 17;               /* #111111 */
  --popover-foreground: 243 244 246; /* #f3f4f6 */

  /* Buttons = solid black */
  --primary: 0 0 0;                  /* #000000 */
  --primary-foreground: 255 255 255; /* #ffffff */

  /* Subtle surfaces and hover states */
  --secondary: 38 38 38;             /* #262626 */
  --secondary-foreground: 229 231 235; /* #e5e7eb */
  --muted: 38 38 38;                 /* #262626 */
  --muted-foreground: 156 163 175;   /* #9ca3af */
  --accent: 28 28 28;                /* #1c1c1c */
  --accent-foreground: 229 231 235;  /* #e5e7eb */

  --destructive: 239 68 68;          /* #ef4444 */
  --destructive-foreground: 255 255 255;
  --border: 48 48 48;                /* #303030 */
  --input: 48 48 48;                 /* #303030 */
  --ring: 255 255 255;               /* white focus ring */

  /* Charts keep some color */
  --chart-1: 34 197 94;              /* green */
  --chart-2: 59 130 246;             /* blue */
  --chart-3: 168 85 247;             /* purple */
  --chart-4: 251 146 60;             /* orange */
  --chart-5: 239 68 68;              /* red */

  /* Sidebar */
  --sidebar: 17 17 17;               /* #111111 */
  --sidebar-foreground: 209 213 219; /* #d1d5db */
  --sidebar-primary: 0 0 0;          /* black */
  --sidebar-primary-foreground: 255 255 255;
  --sidebar-accent: 28 28 28;        /* #1c1c1c */
  --sidebar-accent-foreground: 229 231 235; /* #e5e7eb */
  --sidebar-border: 48 48 48;        /* #303030 */
  --sidebar-ring: 255 255 255;       /* white */
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans antialiased;
  }
  
  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }
}

/* Sidebar layout fallbacks to ensure gap width is respected without special Tailwind plugins */
@layer components {
  /* Reserve space for the fixed sidebar container */
  [data-slot="sidebar-gap"] {
    width: var(--sidebar-width);
  }
  /* When collapsed to icon */
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-gap"] {
    width: var(--sidebar-width-icon);
  }
  /* When fully offcanvas (hidden) */
  [data-slot="sidebar"][data-collapsible="offcanvas"] [data-slot="sidebar-gap"] {
    width: 0;
  }

  /* Ensure the fixed sidebar container also shrinks to icon width when collapsed */
  [data-slot="sidebar-container"] {
    width: var(--sidebar-width);
  }
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-container"] {
    width: var(--sidebar-width-icon);
  }
  [data-slot="sidebar"][data-collapsible="offcanvas"] [data-slot="sidebar-container"] {
    width: 0;
  }

  /* Ensure inset variant styling is applied - rounded corners, shadow, margin */
  [data-slot="sidebar-inset"] {
    background: rgb(var(--background));
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    margin: 0.5rem;
    margin-left: 0;
  }
  
  /* When sidebar is collapsed, add left margin to inset */
  [data-slot="sidebar"][data-state="collapsed"] ~ [data-slot="sidebar-inset"] {
    margin-left: 0.5rem;
  }

  /* Force widths when collapsed using data-collapsible=icon to beat utilities */
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-gap"] {
    width: var(--sidebar-width-icon) !important;
  }
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-container"] {
    width: var(--sidebar-width-icon) !important;
  }
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-inner"] {
    width: var(--sidebar-width-icon) !important;
  }

  /* Force sidebar header to hide when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-slot="sidebar-header"],
  [data-slot="sidebar"][data-state="collapsed"] [data-slot="sidebar-header"] {
    display: none !important;
  }

  /* Ensure menu button text is hidden when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-sidebar="menu-button"] span:not(.sr-only),
  [data-slot="sidebar"][data-state="collapsed"] [data-sidebar="menu-button"] span:not(.sr-only) {
    display: none !important;
  }
  /* Make menu buttons square and center icon when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-sidebar="menu-button"],
  [data-slot="sidebar"][data-state="collapsed"] [data-sidebar="menu-button"] {
    width: var(--sidebar-width-icon);
    height: var(--sidebar-width-icon);
    padding: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Hide group labels when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-sidebar="group-label"],
  [data-slot="sidebar"][data-state="collapsed"] [data-sidebar="group-label"] {
    display: none !important;
  }

  /* Hide group actions when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-sidebar="group-action"],
  [data-slot="sidebar"][data-state="collapsed"] [data-sidebar="group-action"] {
    display: none !important;
  }

  /* Generic helper to hide marked elements when collapsed */
  [data-slot="sidebar"][data-collapsible="icon"] [data-collapse-hide],
  [data-slot="sidebar"][data-state="collapsed"] [data-collapse-hide] {
    display: none !important;
  }
}
